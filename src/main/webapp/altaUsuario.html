<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Naves</title>
    <link rel="stylesheet" href="css/limpiarGenericos.css">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="css/slider.css">
    <script src="https://kit.fontawesome.com/887ee4ad6e.js" crossorigin="anonymous"></script>
    <script src="js/slider.js" type="text/javascript"></script>
    <style>

        #botonCambiaFoto{
            padding: 10px;
            background: #1f4b81;
            color: aliceblue;
            cursor: pointer ;
        }

    </style>
	
	<!--
	JS debe ir en el head, en el body solo el contenido.
	El JS puede ir en un archivo externo, de hecho es lo normal. 
	-->
	
	<script type="text/javascript">
		
		function llamada(id,op) {
		    	fetch('GestionUsuarios?id='+id+"&op="+op)
		    	.then(response => response.json())
		    	.then(data => pintarFormulario(data))
		    	
		}
		
		// Función para otener el valor de un parametro en el GET.
		function getParameterByName(name) {
				    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
				    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				    results = regex.exec(location.search);
				    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}


		function validarFormulario() {

			// Relacionar HTML con JavaScript.
			// con el getElementBy... relaciono JS con el formulario de HTML.
			let nombre = document.getElementById('nombre').value;
			let email = document.getElementById('email').value;
			let tlf = document.getElementById('tlf').value;
			
			// Preguntar si nombre está vacío.
			// Hay mil métodos que hacen esto más rápido, esta es la manera más plana.
			// Esto es un mundo, echar un ojo a las expresiones regulares de JS. Investigar.
			let ok = true;

			if (nombre == "") {
				ok = false;
				document.getElementById('nombre').style.background = "red";
			}

			if (email == "") {
				ok = false;
				document.getElementById('email').style.background = "red";
			}
			
			if (tlf == "") {
				ok = false;
				document.getElementById('tlf').style.background = "red";
			}
			
			// Si 'ok' sigue siendo true, es decir ningun campo está vacío, quiero enviarlos.
			
			if(ok == true) {
				
				document.getElementById('altausuario').submit();
				
			}

		}
		
		function pintarFormulario(datos) {
			
			document.getElementById("id").value = datos.id;
			document.getElementById("nombre").value = datos.nombre;
			document.getElementById("email").value = datos.email;
			document.getElementById("tlf").value = datos.tlf;
			document.getElementById("permiso").value = datos.permiso;
			
		}
		
		window.onload = function() { 
		
			// Recuperar el id y la opcion
			let id = getParameterByName("id");
			let op = getParameterByName("op");	
			
			llamada(id,op);
			
		}

	</script>

</head>
<body>

<div id="container">
    <header>
        <div class="cabecera">
        <div id="usuario"></div>
            <img src="img/logo.png"  title="Logo Naves" alt="Logo">
            <h1 id="titulo">Web Federación Nebrijanos Unidos</h1>
        </div>


        <div class="login">
            <!-- Espacio para el login -->

        </div>

    </header>
    <nav>
        <ul>
            <li><a href="index.html">Home</a> </li>
            <li><a href="altas.html">Alta naves</a> </li>
            <li><a href="galeria_conJson.html">xxxx</a> </li>
            <li><a href="#">xxxx</a> </li>
            <li><a href="#">xxxx</a> </li>
        </ul>
    </nav>
    <section>

        <!-- Estoy trabajando aquí -->
        
		<h1>Alta usuario</h1>
		<form id="altausuario"name="AltaUsuario" action="GestionUsuarios" method="post">
			
			<ul>
				<!--Se puede referenciar con el name, pero con el id también se puede y es más conciso-->
				
				<input type="hidden" id="id" name="id">
				<li><label>Nombre</label><input id="nombre" type="text" name="nombre"></li>
				<li><label>email</label><input id="email" type="text" name="email"></li>
				<li><label>Teléfono</label><input id="tlf" type="text" name="tlf"></li>
				<li><select name="permiso">
					
					<option value="0">...</option>
					<option value="1">Usuario registrado</option>
					<option value="9">Usuario administrador</option>
					
				</select></li>
				<li><input type="button" onclick="validarFormulario()" value="Enviar"></li>
				
			</ul>
			
			
		</form>


        <div class="destacados">
            <a href="#"> <div class="destacado">
                <img  src="img/icon1.png">
                <h2>Instrucciones</h2>
            </div></a>
            <a href="#"> <div class="destacado">
                <img  src="img/icon2.png">
                <h2>Historia</h2>
            </div> </a>
            <a href="#"> <div class="destacado">
                <img  src="img/icon3.png">
                <h2>Galería</h2>
            </div></a>
        </div>
        <div class="info">
            <h3>Info</h3>
            <i class="fa-solid fa-arrows-up-to-line fa-2xl"></i>
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur? </p>
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur? </p>
        </div>
    </section>
    <hr>
    <footer>
        <ul>
            <li><a href="index.html">Home</a> </li>
            <li><a href="#">Naves</a> </li>
            <li><a href="#">Blog</a> </li>
            <li><a href="#">Contacto</a> </li>
            <li><a href="#">Aviso Legal</a> </li>
            <li><a href="#">Cookies</a> </li>
        </ul>
    </footer>
</div>
</body>

</html>
